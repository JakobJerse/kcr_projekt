<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Video Player</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #333;
        }
        .player {
            background: #000;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            border: 2px solid #444;
            position: relative;
        }
        .controls {
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 0;
            width: 100%;
            background: #222;
            box-sizing: border-box;
        }
        .control-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
        }
        .btn {
            background: none;
            border: none;
            color: white;
            font-size: 10px;
            cursor: pointer;
        }
        .progress-bar-container {
            width: 99%;
            position: relative;
            margin: 0 auto 1em auto;
            height: 10px;
            background: #555;
            border: 2px solid #aaa;
            border-radius: 10px;
            position: relative;
        }
        .progress-bar {
            width: 100%;
            height: 100%;
            position: relative;
        }
        .progress {
            height: 100%;
            background: #007bff;
            border-radius: 10px;
            width: 0;
        }
        .progress-handle {
            position: absolute;
            width: 14px;
            height: 14px;
            background: #FFF;
            border-radius: 50%;
            top: -2px;
            left: 0;
            transform: translateX(-50%);
            cursor: pointer;
        }
        .controls.hidden {
            opacity: 0;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <div class="player">
        <div class="screen" style="flex-grow: 1; display: flex; justify-content: center; align-items: center; color: white;">
            Video Screen
        </div>
        <!-- Make control button visible -->
        <div class="controls" id="controls">
            <div class="control-buttons">
                <!-- div that will be on the left size and will hold buttons -->
                <div>
                    <button class="btn" id="rewind"><i class="fas fa-undo-alt"></i></button>
                    <button class="btn" id="play-pause"><i class="fas fa-play"></i></button>
                    <button class="btn" id="forward"><i class="fas fa-redo-alt"></i></button>
                </div>
                <!-- div that will be on the right size and will hold buttons -->
                <div>
                    <button class="btn" onclick="window.location.href='{{ url_for('index') }}'"><i class="fas fa-home"></i></button>
                    <button class="btn"><i class="fas fa-ellipsis-h"></i></button>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progress-bar">
                    <div class="progress" id="progress"></div>
                    <div class="progress-handle" id="progress-handle"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let playing = false;
        const playPauseBtn = document.getElementById('play-pause');
        const rewindBtn = document.getElementById('rewind');
        const forwardBtn = document.getElementById('forward');
        const progress = document.getElementById('progress');
        const progressBar = document.getElementById('progress-bar');
        const progressHandle = document.getElementById('progress-handle');
        const controls = document.getElementById('controls');

        let controlsVisible = true;
        let hideControlsTimeout;

        let interval;
        let width = 0;

        function togglePlayPause() {
            playing = !playing;
            playPauseBtn.innerHTML = playing ? '<i class="fas fa-pause"></i>' : '<i class="fas fa-play"></i>';
            if (playing) {
                startProgress();
            } else {
                stopProgress();
            }
        }

        function startProgress() {
            interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    playing = false;
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                } else {
                    width++;
                    updateProgress(width);
                }
            }, 100);
        }

        function stopProgress() {
            clearInterval(interval);
        }

        function updateProgress(value) {
            progress.style.width = value + '%';
            progressHandle.style.left = value + '%';
        }

        progressBar.addEventListener('click', (e) => {
            const rect = progressBar.getBoundingClientRect();
            const offsetX = e.clientX - rect.left;
            width = (offsetX / rect.width) * 100;
            updateProgress(width);
        });

        progressHandle.addEventListener('mousedown', (e) => {
            const moveHandle = (e) => {
                const rect = progressBar.getBoundingClientRect();
                let offsetX = e.clientX - rect.left;
                offsetX = Math.max(0, Math.min(offsetX, rect.width));
                width = (offsetX / rect.width) * 100;
                updateProgress(width);
            };

            document.addEventListener('mousemove', moveHandle);
            document.addEventListener('mouseup', () => {
                document.removeEventListener('mousemove', moveHandle);
            }, { once: true });
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') {
                width = Math.min(100, width + 5);
            } else if (e.key === 'ArrowLeft') {
                width = Math.max(0, width - 5);
            }
            updateProgress(width);
        });

        rewindBtn.addEventListener('click', () => {
            width = Math.max(0, width - 15);
            updateProgress(width);
        });

        forwardBtn.addEventListener('click', () => {
            width = Math.min(100, width + 15);
            updateProgress(width);
        });

        playPauseBtn.addEventListener('click', togglePlayPause);

        function showControls() {
            controls.classList.remove('hidden');
            resetHideControlsTimeout();
        }

        function hideControls() {
            controls.classList.add('hidden');
        }

        function toggleControls() {
            if (controlsVisible) {
                hideControls();
                controlsVisible = false;
            } else {
                showControls();
                controlsVisible = true;
            }
        }

        document.addEventListener('keydown', (e) => {
            showControls();
            controlsVisible = true;
        });

        document.addEventListener('mousemove', () => {
            showControls();
            controlsVisible = true;
        });

        function resetHideControlsTimeout() {
            clearTimeout(hideControlsTimeout);
            hideControlsTimeout = setTimeout(() => {
                hideControls();
                controlsVisible = false;
            }, 3000);
        }

        resetHideControlsTimeout();
    </script>
</body>
</html>
